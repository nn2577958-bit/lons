<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LONS Palworld Home</title>
<link rel="icon" href="https://cdn.phototourl.com/uploads/2026-02-16-2fc87bae-3744-4c0a-891f-19f3a20b09fd.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
body{ margin:0; font-family:'Segoe UI',sans-serif; background:#111; color:white; }
.topbar{ display:flex; justify-content:space-between; align-items:center; padding:15px 25px; background:#000; border-bottom:1px solid #333; }
.topbar-left{ font-size:20px; font-weight:bold; }
.topbar-right{ display:flex; align-items:center; gap:15px; }
.top-btn{ padding:6px 14px; border-radius:20px; border:none; cursor:pointer; font-size:14px; font-weight:600; }
#admin-status{ padding:6px 14px; border-radius:20px; background:#444; transition: all 0.3s; }
.pay-btn{ background:#FFDC00; color:#000; }
.discord-btn{ background:#5865F2; color:#fff; }
.logout-btn{ background:#f44336; color:#fff; }
.notice-section{ padding:40px; }
.notice-section h2{ font-size:26px; margin-bottom:20px; }
.notice-list{ display:flex; flex-direction:column; gap:15px; }
.notice-item{ background:#1c1c1c; padding:20px; border-radius:12px; border-left:5px solid #4CAF50; }
.notice-item strong{ font-size:18px; }
.notice-item small{ display:block; color:#aaa; margin:5px 0; }
.modal{ display:none; position:fixed; top:0;left:0; width:100%;height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
.modal-content{ background:white; color:black; padding:25px; border-radius:12px; text-align:center; width:300px; }
.modal-content button{ margin-top:15px; padding:8px 15px; border:none; background:#333; color:white; border-radius:8px; }
</style>
</head>
<body>

<div class="topbar">
  <div class="topbar-left">ğŸ® LONS Palworld</div>
  <div class="topbar-right">
    <div id="admin-status">í™•ì¸ì¤‘...</div>
    <button class="top-btn pay-btn" id="kakao-btn">ğŸ’› Pay ì§€ì›ê¸ˆ</button>
    <button class="top-btn discord-btn" id="discord-btn">
      <i class="fab fa-discord"></i> Discord
    </button>
    <button class="top-btn logout-btn" id="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
  </div>
</div>

<div class="notice-section">
  <h2>ğŸ“¢ ê³µì§€ì‚¬í•­</h2>
  <div class="notice-list" id="notice-list"></div>
</div>

<div class="modal" id="pc-modal">
  <div class="modal-content">
    <h3>ğŸ“± ëª¨ë°”ì¼ ì „ìš©</h3>
    <p>ì¹´ì¹´ì˜¤í˜ì´ëŠ” ëª¨ë°”ì¼ì—ì„œ ì´ìš©í•´ì£¼ì„¸ìš”.</p>
    <button onclick="closeModal()">ë‹«ê¸°</button>
  </div>
</div>

<script type="module">
import { auth } from "./firebase.js";
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

const ADMIN_EMAIL="nn2577958@gmail.com"; // ê´€ë¦¬ì ì´ë©”ì¼
const adminStatus = document.getElementById("admin-status");
const noticeList = document.getElementById("notice-list");
const kakaoBtn = document.getElementById("kakao-btn");
const discordBtn = document.getElementById("discord-btn");
const logoutBtn = document.getElementById("logout-btn");
const modal = document.getElementById("pc-modal");

// ===== í˜„ì¬ í•œêµ­ ì‹œê°„(KST) ë¬¸ìì—´ ìƒì„± =====
function getKSTString() {
  const now = new Date();
  const kst = new Date(now.getTime() + 9*60*60*1000); // UTC+9
  const y = kst.getFullYear();
  const m = String(kst.getMonth()+1).padStart(2,'0');
  const d = String(kst.getDate()).padStart(2,'0');
  const h = String(kst.getHours()).padStart(2,'0');
  const min = String(kst.getMinutes()).padStart(2,'0');
  return `${y}-${m}-${d} ${h}:${min}`;
}

// ===== ê³µì§€ì‚¬í•­ (ìë™ í•œêµ­ ì‹œê°„ ë°˜ì˜) =====
const notices = [
  {title:"ê³µì§€ ì‚¬í•­", content:"í•­ìƒ ëª¨ë‹ˆí„°ë§ ì¤‘ì´ë©° ëª¨ë“  íŒŒì¼ì€ ë°ì´í„° ë² ì´ìŠ¤ì— ê¸°ë¡ ë©ë‹ˆë‹¤.", createdAt: getKSTString()},
  {title:"ì‹ ê·œ ë½‘ê¸° ì´ë²¤íŠ¸ ì‹œì‘!", content:"ë‹¹ì²¨ë˜ì‹  ë¶„ë“¤ì€ ìš”ì²­ ì£¼ì‹œë©´ ì§€ê¸‰ ì²˜ë¦¬ë©ë‹ˆë‹¤.", createdAt: getKSTString()},
  {title:"ì—…ë°ì´íŠ¸ ì™„ë£Œ", content:"PAL 0.7.2 ìµœì‹  íŒ¨ì¹˜ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.", createdAt: getKSTString()},
  {title:"ì„œë²„ ì˜¤í”ˆ ì•ˆë‚´", content:"í•˜ë“œì½”ì–´ 02 / 20 å¤§ ì˜¤í”ˆ ë§ì´ ì‚¬ë‘ í•´ì£¼ì„¸ìš”!", createdAt: getKSTString()}
];

// ===== ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬ & ê´€ë¦¬ì í‘œì‹œ =====
onAuthStateChanged(auth,(user)=>{
 if(!user){ window.location.href="index.html"; return; }

 if(user.email===ADMIN_EMAIL){
   adminStatus.innerHTML="ğŸŸ¢ ê´€ë¦¬ì ì˜¨ë¼ì¸";
   adminStatus.style.background="#28a745";
   // ê¹œë¹¡ì„ íš¨ê³¼
   setInterval(()=>{
     adminStatus.style.opacity = adminStatus.style.opacity === "0" ? "1" : "0";
   }, 800);
 } else {
   adminStatus.innerHTML="ğŸ”´ ê´€ë¦¬ì ì˜¤í”„ë¼ì¸";
   adminStatus.style.background="#dc3545";
   adminStatus.style.opacity = "1";
 }

 // ê³µì§€ì‚¬í•­ ë Œë”
 noticeList.innerHTML = "";
 notices.forEach(data=>{
   const div = document.createElement("div");
   div.className = "notice-item";
   div.innerHTML = `
     <strong>${data.title}</strong>
     <small>${data.createdAt}</small>
     <div>${data.content}</div>
   `;
   noticeList.appendChild(div);
 });
});

// ===== ë¡œê·¸ì•„ì›ƒ =====
logoutBtn.onclick = async()=>{
 await signOut(auth);
 window.location.href="index.html";
};

// ===== Discord ë²„íŠ¼ =====
discordBtn.onclick = ()=>{
 window.open("https://discord.gg/tnMXbQ65Hk","_blank");
};

// ===== ì¹´ì¹´ì˜¤í˜ì´ ë²„íŠ¼ =====
kakaoBtn.onclick = ()=>{
 const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
 if(isMobile){
   window.location.href="https://qr.kakaopay.com/FRydbZ6Gr"; // ì‹¤ì œ ì¹´ì¹´ì˜¤í˜ì´ ë§í¬
 } else {
   modal.style.display = "flex";
 }
};

// ===== ëª¨ë‹¬ ë‹«ê¸° =====
window.closeModal = ()=>modal.style.display="none";

</script>

</body>
</html>
